[
["sheepskin-and-returns-to-schooling.html", "10 Sheepskin and Returns to Schooling 10.1 Figure 1 10.2 Figure 2 References", " 10 Sheepskin and Returns to Schooling This replicates Figures 6.3 and 6.4 of Mastering ’Metrics. These analyses use a fuzzy RD design to analyze the “sheepskin effects” of a high school diploma (Clark and Martorell 2014). library(&quot;tidyverse&quot;) Load sheepskin data. data(&quot;sheepskin&quot;, package = &quot;masteringmetrics&quot;) Create indicator variable for passing the test. sheepskin &lt;- mutate(sheepskin, test_lcs_pass = (minscore &gt;= 0)) 10.1 Figure 1 Figure 1. Regression discontinuity mod1_lhs &lt;- lm(receivehsd ~ poly(minscore, 4), data = filter(sheepskin, minscore &lt; 0), weights = n) mod1_rhs &lt;- lm(receivehsd ~ poly(minscore, 4), data = filter(sheepskin, minscore &gt;= 0), weights = n) Append fitted values to the original dataset fig1_data &lt;- sheepskin %&gt;% select(minscore, receivehsd, n) %&gt;% modelr::add_predictions(mod1_lhs, var = &quot;fit_hsd2_l&quot;) %&gt;% mutate(fit_hsd2_l = if_else(minscore &gt; 0, NA_real_, fit_hsd2_l)) %&gt;% modelr::add_predictions(mod1_rhs, var = &quot;fit_hsd2_r&quot;) %&gt;% mutate(fit_hsd2_r = if_else(minscore &lt; 0, NA_real_, fit_hsd2_r)) Figure 6.3. ggplot(fig1_data, aes(x = minscore)) + geom_vline(xintercept = 0, color = &quot;white&quot;, size = 2) + geom_point(mapping = aes(y = receivehsd), color = &quot;gray&quot;) + geom_line(mapping = aes(y = fit_hsd2_l)) + geom_line(mapping = aes(y = fit_hsd2_r)) + scale_x_continuous(&quot;Test Scores Relative to Cutoff&quot;, breaks = seq(-30, 15, by = 5), limits = c(-30, 15)) + scale_y_continuous(&quot;Fraction Receiving Diplomas&quot;, breaks = seq(0, 1, by = 0.2), limits = c(0, 1)) (#fig:fig_6_3)Last-chance exams and Texas sheepskin 10.2 Figure 2 mod2_lhs &lt;- lm(avgearnings ~ poly(minscore, 4), data = filter(sheepskin, minscore &lt; 0), weights = n) mod2_rhs &lt;- lm(avgearnings ~ poly(minscore, 4), data = filter(sheepskin, minscore &gt;= 0), weights = n) Append fitted values to the original dataset fig2_data &lt;- sheepskin %&gt;% select(minscore, avgearnings, n) %&gt;% modelr::add_predictions(mod2_lhs, var = &quot;fit_l&quot;) %&gt;% mutate(fit_l = if_else(minscore &gt; 0, NA_real_, fit_l)) %&gt;% modelr::add_predictions(mod2_rhs, var = &quot;fit_r&quot;) %&gt;% mutate(fit_r = if_else(minscore &lt; 0, NA_real_, fit_r)) Figure 6.4. ggplot(fig2_data, aes(x = minscore)) + geom_vline(xintercept = 0, color = &quot;white&quot;, size = 2) + geom_point(mapping = aes(y = avgearnings), color = &quot;gray&quot;) + geom_line(mapping = aes(y = fit_l)) + geom_line(mapping = aes(y = fit_r)) + scale_x_continuous(&quot;Test Scores Relative to Cutoff&quot;, breaks = seq(-30, 15, by = 5), limits = c(-30, 15)) + scale_y_continuous(&quot;Annual Earnings&quot;, breaks = seq(8000, 18000, by = 2000), limits = c(8000, 18000), labels = scales::comma_format()) (#fig:fig_6_4)The effect of last-chance exam scores on earnings References http://masteringmetrics.com/wp-content/uploads/2015/02/ReadMe_Sheepskin.txt http://masteringmetrics.com/wp-content/uploads/2015/02/cm_graphs.do "]
]
