# Mississipi Bank Failures in the Great Depression

A difference-in-difference analysis of Missisippi bank failures during the Greate Depression.
This replicates Figures 5.1--5.3 in *Mastering Metrics*.

```{r setup, message=FALSE}
library("tidyverse")
library("lubridate")
```

Load the `banks` data.
```{r banks}
data("banks", package = "masteringmetrics")
```

To simplify the problem, use only yearly data, 
```{r}
  filter(month(date) == 7L, mday(date) == 1L) %>%
  select(year, matches("bi[ob][68]")) %>%
  arrange(year) %>%
  mutate(diff86 = bib8[year == 1930] - bib6[year == 1930],
         counterfactual = if_else(year > 1930, bib8 - diff86, bib6))
         
```

```{r banks_glimpse}
glimpse(banks)
```

Plot the lines of the 8th, 6th, and 6th counterfactuals.
```{r}
select(banks, year, bib8, bib6, counterfactual) %>%
  gather(variable, value, -year) %>%
  mutate(variable = recode(variable, bib8 = "8th district", 
                           bib6 = "6th district",
                           counterfactual = "Counterfactual")) %>%
  ggplot(aes(x = year, y = value, colour = variable)) +
  geom_point() +
  geom_line() +
  ylab("Number of Banks in Business") +
  xlab("")
```

Estimate the difference-in-difference estimate for all years.
```{r}
ggplot(filter(banks, year > 1930), aes(x = year, y = bib6 - counterfactual)) +
  geom_point() +
  geom_line() +
  ylab("DID (Number of Banks)") +
  xlab("")
```

## References

- <http://masteringmetrics.com/wp-content/uploads/2015/02/master_banks.do>
- <http://masteringmetrics.com/wp-content/uploads/2015/02/ReadMe_BankFailures.txt>
